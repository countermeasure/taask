{% extends "app_base.html" %}

{% block content %}

<div class="col-sm-10 col-md-8 col-lg-6">

    <table class="table table-hover tablesorter" id="tasktable">
      <thead>
        <tr>
          <th>Description</th>
          <th>Project</th>
          <th>Context 3</th>
          <th>Context 2</th>
          <th>Context 1</th>
          <th>Time</th>
          <th>Priority</th>
          <th>Order</th>
          <th>Due</th>
          <th>Recur</th>
          <th>Until</th>
          <th>Wait</th>
          <th>View</th>
          <th>ID</th>
        </tr>
      </thead>
      <tbody>
        {% for task in task_list %}
          <tr id={{ task.id }}
            onclick="document.location='{% url 'edit-task' task.id %}';">
            <td>{{ task.description }}</td>
            <td>{{ task.project }}</td>
            {% for tag in task.tags reversed %}
              <td>{{ tag }}</td>
            {% endfor %}
            <td>{{ task.time }}</td>
            <td>{{ task.priority }}</td>
            <td>{{ task.order }}</td>
            <td>{{ task.due }}</td>
            <td>{{ task.recur }}</td>
            <td>{{ task.until }}</td>
            <td>{{ task.wait }}</td>
            <td>{{ task.view }}</td>
            <td>{{ task.id }}</td>
            <td class="hidden">{{ task.tags }}</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>

</div><!-- /.col -->

{% endblock content %}

{% block extra-js %}

<script>
$(function(){
  $("#tasktable").tablesorter({
    widgets: ["filter"],
    widgetOptions : {
      filter_columnFilters : false,
      filter_reset: '#filter-reset',
    }
  });
  $('button[data-filter-column]').click(function(){
    $t = $(this);
    column = $t.data('filter-column');
    context = $t.data('filter-text');
    var columns = [];
    columns[column] = context;
    $('table').trigger('search', [ columns ]);
  });
});
</script>

{% endblock extra-js %}
